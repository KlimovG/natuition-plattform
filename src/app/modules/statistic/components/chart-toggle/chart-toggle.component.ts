import { Component, EventEmitter, Output } from '@angular/core';

@Component({
  selector: 'app-chart-toggle',
  template: `
    <div class="flex gap-x-1 p-1 border-2 border-primary-dark w-fit rounded-lg">
      <app-chart-toggle-btn
        [active]="type === 'line'"
        type="line"
        (handleClick)="toggle($event)"
      >
        <svg width="16" height="14" viewBox="0 0 16 14" role="button">
          <path
            d="M15.9725 13.3636C15.9725 13.5324 15.9078 13.6943 15.7926 13.8136C15.6774 13.933 15.5211 14 15.3582 14H0.614327C0.451397 14 0.295141 13.933 0.179932 13.8136C0.0647235 13.6943 0 13.5324 0 13.3636V0.636364C0 0.467589 0.0647235 0.305728 0.179932 0.186387C0.295141 0.0670454 0.451397 0 0.614327 0C0.777257 0 0.933513 0.0670454 1.04872 0.186387C1.16393 0.305728 1.22865 0.467589 1.22865 0.636364V8.14307L5.12426 4.61364C5.23026 4.51751 5.36494 4.46205 5.50573 4.45655C5.64651 4.45104 5.78484 4.49583 5.89754 4.58341L10.4136 8.09216L14.9535 3.97727C15.013 3.91624 15.084 3.86845 15.162 3.83686C15.24 3.80526 15.3234 3.79053 15.4071 3.79355C15.4908 3.79658 15.573 3.8173 15.6487 3.85445C15.7244 3.8916 15.792 3.94439 15.8472 4.00958C15.9025 4.07477 15.9443 4.15097 15.9701 4.23351C15.9959 4.31606 16.0052 4.40319 15.9973 4.48957C15.9894 4.57594 15.9645 4.65973 15.9242 4.73578C15.8839 4.81184 15.829 4.87855 15.7629 4.93182L10.8482 9.38636C10.7422 9.48249 10.6076 9.53795 10.4668 9.54345C10.326 9.54895 10.1877 9.50417 10.075 9.41659L5.55889 5.90943L1.22865 9.8342V12.7273H15.3582C15.5211 12.7273 15.6774 12.7943 15.7926 12.9137C15.9078 13.033 15.9725 13.1949 15.9725 13.3636Z"
          />
        </svg>
      </app-chart-toggle-btn>
      <app-chart-toggle-btn
        [active]="type === 'pie'"
        type="pie"
        (handleClick)="toggle($event)"
      >
        <svg width="16" height="16" viewBox="0 0 16 16" role="button">
          <path
            d="M8 0C6.41775 0 4.87103 0.469192 3.55544 1.34824C2.23985 2.22729 1.21447 3.47672 0.608967 4.93853C0.00346628 6.40034 -0.15496 8.00887 0.153721 9.56072C0.462403 11.1126 1.22433 12.538 2.34315 13.6569C3.46197 14.7757 4.88743 15.5376 6.43928 15.8463C7.99113 16.155 9.59966 15.9965 11.0615 15.391C12.5233 14.7855 13.7727 13.7602 14.6518 12.4446C15.5308 11.129 16 9.58225 16 8C15.9978 5.87895 15.1542 3.84542 13.6544 2.34562C12.1546 0.845814 10.121 0.00223986 8 0ZM13.5285 4.09769L8.61539 6.93384V1.25923C9.59093 1.34867 10.5354 1.64878 11.3837 2.13884C12.2319 2.62891 12.9637 3.29724 13.5285 4.09769ZM7.38462 1.25923V7.64384L1.85462 10.8362C1.40065 9.85218 1.18954 8.77361 1.23904 7.6911C1.28854 6.60859 1.59721 5.55378 2.13908 4.61536C2.68096 3.67693 3.44021 2.8823 4.35301 2.29829C5.26581 1.71427 6.30548 1.35794 7.38462 1.25923ZM8 14.7692C6.9163 14.7688 5.84855 14.5082 4.88651 14.0093C3.92447 13.5104 3.09627 12.7878 2.47154 11.9023L14.1454 5.16308C14.6214 6.19442 14.8303 7.32899 14.7527 8.46225C14.6752 9.59551 14.3137 10.691 13.7015 11.6479C13.0894 12.6048 12.2463 13.3922 11.2499 13.9377C10.2535 14.4831 9.13592 14.7691 8 14.7692Z"
          />
        </svg>
      </app-chart-toggle-btn>
    </div>
  `,
})
export class ChartToggleComponent {
  type: string = 'pie';
  @Output() toggleType = new EventEmitter<'pie' | 'line'>();

  toggle(type: 'pie' | 'line') {
    this.type = type;
    this.toggleType.emit(type);
  }
}
